<html>
<head>
    <!--plotly scripts -->
    <!-- <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> -->
<script src="{{ url_for('static', filename='js/third-party/plotly/dist/plotly.min.js') }}"></script>
    <!--bootstrap scripts -->
   <!-- <link href= "{{ url_for('static', filename='css/bootstrap.min.css')}}" rel="stylesheet">
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>-->
	    <link href= "{{ url_for('static',
	filename='js/third-party/bootstrap/dist/css/bootstrap.min.css')}}" rel="stylesheet">
    <script src="{{ url_for('static', filename='js/third-party/jquery/dist/jquery.min.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='js/third-party/bootstrap/dist/js/bootstrap.min.js') }}">
	</script>


</head>
<body>
<h2> K-means Clustering </h2> <!--title goes here-->
<p>   </p>

<div id="controls">
<form class="form inline" action="https://geco.iplantcollaborative.org/hclent/bionlp/cogekmeans/" method="post">
<label for="buttongroup">clusters:</label>
	<div id="buttongroup">
		<div class="col-xs-1">
		<select class="form-control" id="k_val" name="k_val">
		  <option name="1" value="1">k=?</option>
	  <option name="2" value="2">k=2</option>
	  <option name="3" value="3">k=3</option>
	  <option name="4" value="4">k=4</option>
	  <option name="5" value="5">k=5</option>
		   </select>
		</div>

		<button type="submit" id="kmeans" class="btn btn-default" data-toggle="modal" data-target="#myModal">Update</button>
		</div>
</form>
</div>

<!-- Progress modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="myModalLabel">Loading</h4>
      </div>
      <div class="modal-body">

				<!-- Progress bar that doesn't actually move -->
				<div class="progress">
				  <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="100" style="width: 45%">
				    <span class="sr-only">45% Complete</span>
				  </div>
				</div>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<br></br>
<br></br>
<div id="myDiv">  </div>

<script>

var trace1 = {
	x: [0.066102367693280262, 0.10117429818434157, 0.065448152233741355, 0.12957769627056734, 0.0, 0.0, 0.0, 0.033086298003870501, 0.0, 0.079199111716611328, 0.07920043559503874, 0.0, 0.0, 0.0, 0.065449120879990053, 0.03307554052747963, 0.0],
	y: [0.22592582983719667, 0.30417884421068792, 0.23530756282072354, 0.28618977998576201, 0.45071757659485601, 0.32260489731247388, 0.42187959136427178, 0.45951374745429191, 0.26689473161284638, 0.42321166320361897, 0.42326593087652797, 0.45069288618409981, 0.30527722803109097, 0.42183214199481028, 0.23535779234690279, 0.45950114308280693, 0.32322053931035183],
	z: [0.14958131056104676, 0.046886396290944217, 0.1516687924321993, 0.070610050276351199, 0.0, 0.063469716819782626, 0.0, 0.0, 0.11900067000164932, 0.00093842608242990049, 0.00081615316643822476, 0.0, 0.057867990926709537, 0.0, 0.15158485951212169, 0.0, 0.050366695460312388],
	mode: 'markers',
	marker: {
		color: 'rgb(110, 220, 110)',
		size: 12,
		symbol: 'circle',
		line: {
		color: 'rgb(110, 220, 110)',
		width: 0.5},
		opacity: 0.8},
	type: 'scatter3d'
};

var trace2 = {
	x: [0.20771569237281703, 0.1184984076282555, 0.13985415282937733, 0.15145968366727655, 0.18883787483842285, 0.27304240633972093, 0.26357432364022387, 0.23964715800614553, 0.24154392452559842, 0.26166894847965039, 0.21937856135734618, 0.20548243035779323, 0.20274369236047085, 0.29508019352750858, 0.11857626193874933, 0.21395487962450302, 0.21294104459055713, 0.18672908188577536, 0.18190727858945885, 0.19034682482113774, 0.18565640921865401, 0.16966739531731267, 0.20689607927266893, 0.19806125825761936, 0.22649527476350137, 0.11848080321851176, 0.19318054649463592, 0.28411596253344612, 0.27589315312796131, 0.239289281056906, 0.1398509865020498, 0.2223810203607772, 0.24060415799131413, 0.29393845502405336, 0.22763279647321721, 0.20691094707048885, 0.28412112658286415, 0.2027463962049737, 0.17697276373909787, 0.24058332574576263, 0.25561495669489165, 0.1659631558495312, 0.18937864301464435, 0.32585456009101893, 0.19300530130284033, 0.29508576999683522, 0.27337753620125022, 0.22400073861717654, 0.29807453489765595, 0.26013530771087234, 0.26166488682252298, 0.24546056778676253, 0.14140925625805784, 0.17213122188242699, 0.3039277970430207, 0.27304240633972093, 0.24154892834421252, 0.27309655229721602, 0.20772894023986577, 0.21329080640169829, 0.1185697001433717],
	y: [0.18305565586139985, 0.30748974191439354, 0.010092072123752342, 0.046307063865491417, 0.0, 0.010128359061483327, 0.0, 0.0032176253519432979, 0.02528371983221675, 0.097474147084020066, 0.087069255069197521, 0.0, 0.11568935305240202, 0.044168803010362301, 0.31546062867521024, 0.0, 0.030004132385980032, 0.0, 0.11905168412023064, 0.051667604195813843, 0.0, 0.044747046706128744, 0.12419595925234092, 0.016291665810286779, 0.0044335158476584086, 0.30747572096620407, 0.18373264675342421, 0.0044040316739592149, 0.0, 0.14174352864506939, 0.010099364506315094, 0.084119864617118803, 0.0, 0.015566845015288022, 0.095545767055045139, 0.12415664478889747, 0.0053383073741779669, 0.1157080064574199, 0.073322009913797823, 0.0, 0.072852834795218188, 0.095534190798907667, 0.13102018321962899, 0.034183176195477845, 0.21718183925470949, 0.044182040556770191, 0.0, 0.075589148253920435, 0.0, 0.00053366235262204155, 0.097502497534445939, 0.16267804664245025, 0.21868571156279609, 0.069873777895274533, 0.0, 0.010128359061483327, 0.025302532152849184, 0.006757518243047436, 0.18308368665714081, 0.029841712354915683, 0.31543364658539047],
	z:[0.037814392630484223, 0.0, 0.13290424475898072, 0.02420703149670856, 0.0, 0.0, 0.049087150628956529, 0.060501717203413956, 0.032797389630832181, 0.084471691382306549, 0.038799864022972842, 0.10340115219888728, 0.083473002386855608, 0.029888142406850726, 0.0, 0.014734847404292191, 0.0, 0.10889593951437722, 0.13842894206427464, 0.094395787617607779, 0.078734445260121175, 0.10102164369609379, 0.0, 0.051919978668246096, 0.0, 0.0, 0.026859450720198009, 0.048534570376730923, 0.068119220234447317, 0.016589729753855389, 0.13284931983265691, 0.078768656474526827, 0.052742680025537503, 0.062350562996879459, 0.0096421353100824767, 0.0, 0.032490806529554175, 0.083407672115422951, 0.0, 0.08775059690068987, 0.073615877124246179, 0.0089808276747067959, 0.0, 0.023343979834276395, 0.0066014211826788691, 0.029800696618685493, 0.048713653637950265, 0.026540085243326499, 0.051409957830842345, 0.056450149565189352, 0.084399478954838528, 0.00153253907758325, 0.028413453422589722, 0.15031934968659694, 0.022520086318838971, 0.0, 0.032664997102033771, 0.046407708138459527, 0.037750564634374456, 0.0, 0.0],

	mode: 'markers',
	marker: {
		color: 'rgb(255, 185, 51)',
		size: 12,
		symbol: 'circle',
		line: {
		color: 'rgb(255, 185, 51)',
		width: 1},
		opacity: 0.8},
	type: 'scatter3d'};

var trace3 = {
	x: [0.092745636951151095, 0.028400263606397972, 0.0, 0.037291348413206582, 0.050084502555773965, 0.077274140224031201, 0.13612942183291932, 0.1027603295158409, 0.03381161719791391, 0.16113265268082713, 0.11141498355878103, 0.045727945099228007, 0.03087237219190939, 0.082330671593085797, 0.057283412105238796, 0.041489214102587609, 0.10317559946166151, 0.071173999452359665, 0.12287346867705357, 0.04002097691086285, 0.011069849523136563, 0.079664739446253949, 0.022306051914241808, 0.0, 0.096234490230675679, 0.090054459339181908, 0.069837608549564667, 0.044262051309464777, 0.065954770006992791, 0.041705437227149533, 0.058404875735841466, 0.038588780434296081, 0.018788426958592848, 0.0, 0.17022494357696474, 0.17493909536306651, 0.058393024136375565, 0.10599416510802015, 0.11054597323814458, 0.12139758678781899, 0.058381340128876115, 0.044233762998713407, 0.090429447408744174, 0.0, 0.14746506254663264, 0.042998487487558801, 0.046147304446041766, 0.062677207476845298, 0.13733374533411441, 0.086451641125526807, 0.037580184889216516, 0.043023432768753145, 0.15372880479573917, 0.14847161161035216, 0.13141070988973019, 0.11000911774318119, 0.065950719623167189, 0.023756184578327476, 0.038667955573436268, 0.020834114900277818, 0.15451858472338204, 0.06518644123211495, 0.11935998501562757, 0.13613362626950648, 0.058101581750385996, 0.13658611682345059, 0.085172164399352601, 0.03473514764903967, 0.048069412028417337, 0.11316623883071801, 0.054646232673528312, 0.0, 0.082573414097184522, 0.028394750259315083, 0.028435405030337493],
	y: [0.054710056044629744, 0.051047488268158824, 0.071825426562732664, 0.0, 0.0, 0.15133383983248883, 0.077955849100190988, 0.0, 0.0024430593325675902, 0.042406089349435447, 0.0, 0.0, 0.16965304498326156, 0.0, 0.065131359525751775, 0.0, 0.086823751937860641, 0.0, 0.032047123606966751, 0.038361384963835822, 0.025485897378750937, 0.0, 0.0, 0.13461809345034573, 0.0, 0.17638092680441578, 0.12981659431221093, 0.11060102092535636, 0.0, 0.0036811955181163536, 0.087204032029853759, 0.0, 0.09938521613601066, 0.10674978204012177, 0.018409420654926505, 0.030312357110132585, 0.087231186980784123, 0.049822328064032403, 0.057843751663672213, 0.065612563392092052, 0.0, 0.083261517703507523, 0.13783854720487707, 0.16321765001143448, 0.0, 0.0, 0.027660007467172537, 0.056951673487719096, 0.012975992030323832, 0.098296863691274758, 0.02672984982784974, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.074582480348400051, 0.0, 0.11636350657249912, 0.10378596621433148, 0.045257653064420436, 0.094755798026874838, 0.077975342739157752, 0.13933685436047447, 0.001137418514759548, 0.039461857008722463, 0.12287477802961894, 0.0099767092520962816, 0.0, 0.10698901969724472, 0.13491828507139847, 0.057329123177053951, 0.051139774045320392, 0.12064513214555758],
	z: [0.11332332032609786, 0.21905894537014883, 0.25237040477485184, 0.22500412082555968, 0.034056942239095174, 0.16556781906012491, 0.070058274711345653, 0.15925303007410699, 0.022810266575955751, 0.10875299175860757, 0.23530496191146269, 0.021386950045193118, 0.078084899697881488, 0.14951956769396879, 0.3188669487607535, 0.042412036583889264, 0.15258477622143973, 0.14739752595909156, 0.25400813710053949, 0.22620252510813746, 0.18491216872577557, 0.02631289071973068, 0.060925103652653731, 0.12728581242297357, 0.18508172749792634, 0.066289526816774483, 0.10769322394298436, 0.0062002186973856887, 0.22254086396922862, 0.28007213199113573, 0.29049657834374143, 0.0087041311312391362, 0.10149207560527418, 0.037659466831534982, 0.11378407948699812, 0.25118128159985526, 0.29043275958976633, 0.039587284169238728, 0.18360169049459471, 0.01708232482447427, 0.18723859054021277, 0.184035409088673, 0.015957069174066529, 0.18478917437076869, 0.15538232834652888, 0.13635283081313201, 0.22579797137071628, 0.11444600938644359, 0.12343999668628985, 0.027286210997737707, 0.093365401522305672, 0.24033925075597487, 0.23741389445845162, 0.17154023951623826, 0.088811760446596069, 0.19324872217617506, 0.22246227576526184, 0.19691777729724669, 0.0078283775195223289, 0.12832444916215643, 0.17890479469022774, 0.13040325646837359, 0.020037714146768311, 0.069994605044898558, 0.25349214849335622, 0.15461857146309016, 0.20227951801899552, 0.24750044546968114, 0.32935578320451703, 0.038376835323899218, 0.012230897706905464, 0.12678507066306255, 0.27046663861616976, 0.21895870740230886, 0.22372111292826152],

	mode: 'markers',
	marker: {
		color: 'rgb(49, 113, 231)',
		size: 12,
		symbol: 'circle',
		line: {
		color: 'rgb(49, 113, 231)',
		width: 1},
		opacity: 0.8},
	type: 'scatter3d'};



var data = [trace1, trace2, trace3];
var layout = {margin: {
	l: 0,
	r: 0,
	b: 0,
	t: 0
  }};
Plotly.newPlot('myDiv', data, layout);

	</script>


<script>
  var btn = document.getElementById('kmeans');
  btn.addEventListener('click', loadProgress);

  function loadProgress() {
    //console.log('Button clicked!');
    var progressBar = document.getElementsByClassName('progress-bar')[0];
    var interval = 30;
    var currentValue = 0;
    for (var i = 0; i < 100; i += interval) {
      //console.log('Setting interval', i)
      setTimeout(function() {
        currentValue += i;
        //console.log('Setting progress width to:', currentValue, '%');
        progressBar.setAttribute('style', 'width: ' + currentValue + '%');
      }, i);
    }
  }
</script>